{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\GG\\\\Documents\\\\finalproject\\\\semicolon-app\\\\screens\\\\tabs\\\\Search\\\\SearchPresenter.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  query search($term: String!) {\\n    searchPost(term: $term) {\\n      id\\n      files {\\n          id\\n        url\\n      }\\n      likeCount\\n      commentCount\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport PropTypes from \"prop-types\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery } from \"react-apollo-hooks\";\nimport Loader from \"../../../components/Loader\";\nimport SquarePhoto from \"../../../components/SquarePhoto\";\nimport styled from \"styled-components/native\";\nexport var SEARCH = gql(_templateObject());\n\nvar SearchPresenter = function SearchPresenter(_ref) {\n  var term = _ref.term,\n      shouldFetch = _ref.shouldFetch;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      refreshing = _useState2[0],\n      setRefreshing = _useState2[1];\n\n  var _useQuery = useQuery(SEARCH, {\n    variables: {\n      term: term\n    },\n    skip: !shouldFetch,\n    fetchPolicy: \"network-only\"\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      refetch = _useQuery.refetch;\n\n  var onRefresh = function onRefresh() {\n    return _regeneratorRuntime.async(function onRefresh$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setRefreshing(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(refetch({\n              variables: {\n                term: term\n              }\n            }));\n\n          case 4:\n            _context.next = 8;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n\n          case 8:\n            _context.prev = 8;\n            setRefreshing(false);\n            return _context.finish(8);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 6, 8, 11]], Promise);\n  };\n\n  return React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexDirection: \"row\",\n      flexWrap: \"wrap\"\n    },\n    refreshControl: React.createElement(RefreshControl, {\n      onRefresh: onRefresh,\n      refreshing: refreshing,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 103\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, loading ? React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 25\n    }\n  }) : data && data.searchPost && data.searchPost.map(function (post) {\n    return React.createElement(SquarePhoto, _extends({\n      key: post.id\n    }, post, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 45\n      }\n    }));\n  }));\n};\n\nSearchPresenter.propTypes = {\n  term: PropTypes.string.isRequired,\n  shouldFetch: PropTypes.bool.isRequired\n};\nexport default SearchPresenter;","map":{"version":3,"sources":["C:/Users/GG/Documents/finalproject/semicolon-app/screens/tabs/Search/SearchPresenter.js"],"names":["React","useState","PropTypes","gql","useQuery","Loader","SquarePhoto","styled","SEARCH","SearchPresenter","term","shouldFetch","refreshing","setRefreshing","variables","skip","fetchPolicy","data","loading","refetch","onRefresh","flexDirection","flexWrap","searchPost","map","post","id","propTypes","string","isRequired","bool"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;;AAEA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,MAAP;AACA,OAAOC,WAAP;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAGA,OAAO,IAAMC,MAAM,GAAGL,GAAH,mBAAZ;;AAcP,IAAMM,eAAe,GAAG,SAAlBA,eAAkB,OAA2B;AAAA,MAAxBC,IAAwB,QAAxBA,IAAwB;AAAA,MAAlBC,WAAkB,QAAlBA,WAAkB;;AAAA,kBACXV,QAAQ,CAAC,KAAD,CADG;AAAA;AAAA,MACxCW,UADwC;AAAA,MAC5BC,aAD4B;;AAAA,kBAEZT,QAAQ,CAACI,MAAD,EAAS;AAChDM,IAAAA,SAAS,EAAE;AACPJ,MAAAA,IAAI,EAAJA;AADO,KADqC;AAIhDK,IAAAA,IAAI,EAAE,CAACJ,WAJyC;AAKhDK,IAAAA,WAAW,EAAE;AALmC,GAAT,CAFI;AAAA,MAEvCC,IAFuC,aAEvCA,IAFuC;AAAA,MAEjCC,OAFiC,aAEjCA,OAFiC;AAAA,MAExBC,OAFwB,aAExBA,OAFwB;;AAS/C,MAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAEVP,YAAAA,aAAa,CAAC,IAAD,CAAb;AAFU;AAAA,6CAGJM,OAAO,CAAC;AAAEL,cAAAA,SAAS,EAAE;AAAEJ,gBAAAA,IAAI,EAAJA;AAAF;AAAb,aAAD,CAHH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAMVG,YAAAA,aAAa,CAAC,KAAD,CAAb;AANU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AASF,SACM,oBAAC,UAAD;AAAY,IAAA,qBAAqB,EAAE;AAAEQ,MAAAA,aAAa,EAAE,KAAjB;AAAwBC,MAAAA,QAAQ,EAAC;AAAjC,KAAnC;AAA8E,IAAA,cAAc,EAAE,oBAAC,cAAD;AAAgB,MAAA,SAAS,EAAEF,SAA3B;AAAsC,MAAA,UAAU,EAAER,UAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKM,OAAO,GAAI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAJ,GACHD,IAAI,IACLA,IAAI,CAACM,UADJ,IAEDN,IAAI,CAACM,UAAL,CAAgBC,GAAhB,CAAoB,UAAAC,IAAI;AAAA,WAAI,oBAAC,WAAD;AAAa,MAAA,GAAG,EAAEA,IAAI,CAACC;AAAvB,OAA+BD,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;AAAA,GAAxB,CAJR,CADN;AAUD,CA5BD;;AA8BAhB,eAAe,CAACkB,SAAhB,GAA4B;AACxBjB,EAAAA,IAAI,EAAER,SAAS,CAAC0B,MAAV,CAAiBC,UADC;AAExBlB,EAAAA,WAAW,EAAET,SAAS,CAAC4B,IAAV,CAAeD;AAFJ,CAA5B;AAKA,eAAepB,eAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { ScrollView, RefreshControl } from \"react-native\";\r\nimport PropTypes from \"prop-types\";\r\nimport { gql } from \"apollo-boost\";\r\nimport { useQuery } from \"react-apollo-hooks\";\r\nimport Loader from \"../../../components/Loader\";\r\nimport SquarePhoto from \"../../../components/SquarePhoto\";\r\nimport styled from \"styled-components/native\";\r\n\r\n\r\nexport const SEARCH = gql`\r\n  query search($term: String!) {\r\n    searchPost(term: $term) {\r\n      id\r\n      files {\r\n          id\r\n        url\r\n      }\r\n      likeCount\r\n      commentCount\r\n    }\r\n  }\r\n`;\r\n\r\nconst SearchPresenter = ({ term, shouldFetch }) => {\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const { data, loading, refetch } = useQuery(SEARCH, {\r\n        variables: {\r\n            term\r\n        },\r\n        skip: !shouldFetch,\r\n        fetchPolicy: \"network-only\"\r\n    });\r\n    const onRefresh = async () => {\r\n        try {\r\n            setRefreshing(true);\r\n            await refetch({ variables: { term } });\r\n        } catch (e) {\r\n        } finally {\r\n            setRefreshing(false);\r\n        }\r\n    };\r\n  return (\r\n        <ScrollView contentContainerStyle={{ flexDirection: \"row\", flexWrap:\"wrap\" }} refreshControl={<RefreshControl onRefresh={onRefresh} refreshing={refreshing} />} >\r\n            {loading ? (<Loader />\r\n            ) : (data &&\r\n                data.searchPost &&\r\n                data.searchPost.map(post => <SquarePhoto key={post.id} {...post} />)\r\n                )\r\n            }\r\n      </ScrollView >\r\n    );\r\n};\r\n\r\nSearchPresenter.propTypes = {\r\n    term: PropTypes.string.isRequired,\r\n    shouldFetch: PropTypes.bool.isRequired\r\n};\r\n\r\nexport default SearchPresenter;"]},"metadata":{},"sourceType":"module"}