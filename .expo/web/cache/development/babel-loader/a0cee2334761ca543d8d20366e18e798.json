{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\GG\\\\Documents\\\\finalproject\\\\semicolon-app\\\\screens\\\\photo\\\\SelectPhoto.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  color: yellow;\\n  font-weight: 600;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  width: 70px;\\n  height: 30px;\\n  position: absolute;\\n  right: 5px;\\n  top: 15px;\\n  background-color: \", \";\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 15px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport * as Permissions from \"expo-permissions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport styled from \"styled-components\";\nimport Loader from \"../../components/Loader\";\nimport constants from \"../../Constants\";\nimport styles from \"../../styles\";\nvar View = styled.View(_templateObject());\nvar Button = styled.TouchableOpacity(_templateObject2(), styles.blackColor);\nvar Text = styled.Text(_templateObject3());\nexport default (function (_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasPermission = _useState4[0],\n      setHasPermission = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selected = _useState6[0],\n      setSelected = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      allPhotos = _useState8[0],\n      setAllPhotos = _useState8[1];\n\n  var changeSelected = function changeSelected(photo) {\n    setSelected(photo);\n  };\n\n  var getPhotos = function getPhotos() {\n    var _await$MediaLibrary$g, assets, _assets, firstPhoto;\n\n    return _regeneratorRuntime.async(function getPhotos$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(MediaLibrary.getAssetsAsync());\n\n          case 3:\n            _await$MediaLibrary$g = _context.sent;\n            assets = _await$MediaLibrary$g.assets;\n            _assets = _slicedToArray(assets, 1), firstPhoto = _assets[0];\n            setSelected(firstPhoto);\n            setAllPhotos(assets);\n            navigation.navigate(\"PhotoTabs\", {\n              photo: firstPhoto\n            });\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 14:\n            _context.prev = 14;\n            setLoading(false);\n            return _context.finish(14);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 11, 14, 17]], Promise);\n  };\n\n  var askPermission = function askPermission() {\n    var _await$MediaLibrary$r, status;\n\n    return _regeneratorRuntime.async(function askPermission$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(MediaLibrary.requestPermissionsAsync());\n\n          case 3:\n            _await$MediaLibrary$r = _context2.sent;\n            status = _await$MediaLibrary$r.status;\n\n            if (status === \"granted\") {\n              setHasPermission(true);\n              getPhotos();\n            }\n\n            _context2.next = 12;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n            setHasPermission(false);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  useEffect(function () {\n    askPermission();\n  }, []);\n  navigation.navigate(\"PhotoTabs\", {\n    photo: selected\n  });\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, loading ? React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }) : React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, hasPermission ? React.createElement(React.Fragment, null, React.createElement(Image, {\n    style: {\n      width: constants.width,\n      height: constants.width\n    },\n    source: {\n      uri: selected.uri\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }), React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexDirection: \"row\",\n      flexWrap: \"wrap\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, allPhotos.map(function (photo) {\n    return React.createElement(TouchableOpacity, {\n      key: photo.id,\n      onPress: function onPress() {\n        return changeSelected(photo);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 19\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: photo.uri\n      },\n      style: {\n        width: constants.width / 3,\n        height: constants.height / 6,\n        opacity: photo.id === selected.id ? 0.5 : 1\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }));\n  }))) : null));\n});","map":{"version":3,"sources":["C:/Users/GG/Documents/finalproject/semicolon-app/screens/photo/SelectPhoto.js"],"names":["React","useState","useEffect","Permissions","MediaLibrary","styled","Loader","constants","styles","View","Button","TouchableOpacity","blackColor","Text","navigation","loading","setLoading","hasPermission","setHasPermission","selected","setSelected","allPhotos","setAllPhotos","changeSelected","photo","getPhotos","getAssetsAsync","assets","firstPhoto","navigate","console","log","askPermission","requestPermissionsAsync","status","width","height","uri","flexDirection","flexWrap","map","id","opacity"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport { Image, ScrollView, TouchableOpacity } from \"react-native\";\r\nimport * as MediaLibrary from \"expo-media-library\";\r\nimport styled from \"styled-components\";\r\nimport Loader from \"../../components/Loader\";\r\nimport constants from \"../../Constants\";\r\nimport styles from \"../../styles\";\r\n\r\nconst View = styled.View`\r\n  flex: 1;\r\n`;\r\n\r\nconst Button = styled.TouchableOpacity`\r\n  width: 70px;\r\n  height: 30px;\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 15px;\r\n  background-color: ${styles.blackColor};\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 15px;\r\n`;\r\n\r\nconst Text = styled.Text`\r\n  color: yellow;\r\n  font-weight: 600;\r\n`;\r\n\r\nexport default ({ navigation }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [hasPermission, setHasPermission] = useState(false);\r\n  const [selected, setSelected] = useState([]);\r\n  const [allPhotos, setAllPhotos] = useState();\r\n  const changeSelected = photo => {\r\n    setSelected(photo);\r\n  };\r\n  const getPhotos = async () => {\r\n    try {\r\n      const { assets } = await MediaLibrary.getAssetsAsync();\r\n      const [firstPhoto] = assets;\r\n      setSelected(firstPhoto);\r\n      setAllPhotos(assets);\r\n      navigation.navigate(\"PhotoTabs\", { photo: firstPhoto })\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      setLoading(false);\r\n\r\n    }\r\n  };\r\n\r\n  const askPermission = async () => {\r\n    try {\r\n      const { status } = await MediaLibrary.requestPermissionsAsync();\r\n      if (status === \"granted\") {\r\n        setHasPermission(true);\r\n        getPhotos();\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n      setHasPermission(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    askPermission();\r\n  }, []);\r\n\r\n  navigation.navigate(\"PhotoTabs\", { photo: selected });\r\n  \r\n  return (\r\n    <View>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : (\r\n        <View>\r\n          {hasPermission ? (\r\n            <>\r\n              <Image\r\n                style={{ width: constants.width, height: constants.width }}\r\n                source={{ uri: selected.uri }}\r\n                />\r\n                \r\n              <ScrollView contentContainerStyle={{ flexDirection: \"row\", flexWrap:\"wrap\" }}>\r\n                {allPhotos.map(photo => (\r\n                  <TouchableOpacity\r\n                    key={photo.id}\r\n                    onPress={() => changeSelected(photo)}\r\n                  >\r\n                    <Image\r\n                      source={{ uri: photo.uri }}\r\n                      style={{\r\n                        width: constants.width / 3,\r\n                        height: constants.height / 6,\r\n                        opacity: photo.id === selected.id ? 0.5 : 1\r\n                      }}\r\n                    />\r\n                  </TouchableOpacity>\r\n              ))}\r\n              </ScrollView>\r\n            </>\r\n          ) : null}\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}