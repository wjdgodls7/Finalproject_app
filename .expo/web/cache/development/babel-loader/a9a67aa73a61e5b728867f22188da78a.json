{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\GG\\\\Documents\\\\finalproject\\\\semicolon-app\\\\components\\\\Post.js\";\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteralLoose([\"\\nflex:1;\\n    flex-direction: row;\\n    align-items:flex-end;\\n    justifyContent: flex-end;\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  opacity: 0.5;\\n  font-size: 13px;\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  margin: 5px 0px;\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  padding: 10px;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  margin-right: 10px;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  flex-direction: row;\\n  margin-bottom: 5px;\\n  margin-top : -55px;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  font-size: 12px;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  font-weight: 500;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  margin-left: 10px;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  padding: 15px;\\n  flex-direction: row;\\n  align-items: center;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  margin-bottom: 15px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  mutation toggelLike($postId: String!) {\\n    toggleLike(postId: $postId)\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { PlatformMacOSStatic } from \"react-native-web/dist/index\";\nimport styled from \"styled-components/native\";\nimport { AntDesign, FontAwesome } from \"@expo/vector-icons\";\nimport PropTypes from \"prop-types\";\nimport Swiper from \"react-native-swiper\";\nimport { gql } from \"apollo-boost\";\nimport constants from \"../Constants\";\nimport styles from \"../styles\";\nimport { useMutation } from \"react-apollo-hooks\";\nimport { withNavigation } from \"react-navigation\";\nimport Tags from \"react-native-tags\";\nexport var TOGGLE_LIKE = gql(_templateObject());\nvar Container = styled.View(_templateObject2());\nvar Header = styled.View(_templateObject3());\nvar Touchable = styled.TouchableOpacity(_templateObject4());\nvar HeaderUserContainer = styled.View(_templateObject5());\nvar Bold = styled.Text(_templateObject6());\nvar Location = styled.Text(_templateObject7());\nvar IconsContainer = styled.View(_templateObject8());\nvar IconContainer = styled.View(_templateObject9());\nvar InfoContainer = styled.View(_templateObject10());\nvar Caption = styled.Text(_templateObject11());\nvar CommentCount = styled.Text(_templateObject12());\nvar Tagview = styled.View(_templateObject13());\n\nvar Post = function Post(_ref) {\n  var id = _ref.id,\n      user = _ref.user,\n      location = _ref.location,\n      _ref$files = _ref.files,\n      files = _ref$files === void 0 ? [] : _ref$files,\n      likeCountProp = _ref.likeCount,\n      caption = _ref.caption,\n      _ref$comments = _ref.comments,\n      comments = _ref$comments === void 0 ? [] : _ref$comments,\n      isLikedProp = _ref.isLiked,\n      navigation = _ref.navigation,\n      hashes = _ref.hashes;\n\n  var _useState = useState(isLikedProp),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLiked = _useState2[0],\n      setIsLiked = _useState2[1];\n\n  var _useState3 = useState(likeCountProp),\n      _useState4 = _slicedToArray(_useState3, 2),\n      likeCount = _useState4[0],\n      setLikeCount = _useState4[1];\n\n  var _useState5 = useState(caption),\n      _useState6 = _slicedToArray(_useState5, 2),\n      copyCaption = _useState6[0],\n      setCopyCaption = _useState6[1];\n\n  var _useMutation = useMutation(TOGGLE_LIKE, {\n    variables: {\n      postId: id\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      toggleLikeMutaton = _useMutation2[0];\n\n  var handleLike = function handleLike() {\n    return _regeneratorRuntime.async(function handleLike$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (isLiked === true) {\n              setLikeCount(function (l) {\n                return l - 1;\n              });\n            } else {\n              setLikeCount(function (l) {\n                return l + 1;\n              });\n            }\n\n            setIsLiked(function (p) {\n              return !p;\n            });\n            _context.prev = 2;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(toggleLikeMutaton());\n\n          case 5:\n            _context.next = 9;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 7]], Promise);\n  };\n\n  console.log(hashes[0].tag);\n  return React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, React.createElement(Touchable, {\n    onPress: function onPress() {\n      return navigation.navigate(\"UserDetail\", {\n        username: user.username\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, React.createElement(Image, {\n    style: {\n      height: 40,\n      width: 40,\n      borderRadius: 20\n    },\n    source: {\n      uri: user.avatar\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  })), React.createElement(Touchable, {\n    onPress: function onPress() {\n      return navigation.navigate(\"UserDetail\", {\n        username: user.username\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, React.createElement(HeaderUserContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, React.createElement(Bold, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, user.username), React.createElement(Location, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, location))), React.createElement(Tagview, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, React.createElement(Tags, {\n    initialTags: ([hashes[0].tag], [hashes[1].tag], [hashes[2].tag]),\n    onTagPress: function onTagPress(tagLabel) {\n      console.log(tagLabel);\n    },\n    readonly: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  })), user.isSelf ? React.createElement(Popup, {\n    id: id,\n    copyCaption: copyCaption,\n    setCopyCaption: setCopyCaption,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 22\n    }\n  }) : null), React.createElement(Swiper, {\n    style: {\n      height: constants.width / 0.88\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, files.map(function (file) {\n    return React.createElement(Image, {\n      style: {\n        width: constants.width,\n        height: constants.width\n      },\n      key: file.id,\n      source: {\n        uri: file.url\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    });\n  })), React.createElement(InfoContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, React.createElement(IconsContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, React.createElement(Touchable, {\n    onPress: handleLike,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, React.createElement(IconContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, React.createElement(AntDesign, {\n    size: 24,\n    color: isLiked ? styles.starColor : styles.blackColor,\n    name: Platform.OS === \"ios\" ? isLiked ? \"star\" : \"staro\" : isLiked ? \"star\" : \"staro\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }))), React.createElement(Touchable, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, React.createElement(IconContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, React.createElement(FontAwesome, {\n    color: styles.blackColor,\n    size: 24,\n    name: Platform.OS === \"ios\" ? \"comment-o\" : \"comment-o\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  })))), React.createElement(Touchable, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, React.createElement(Bold, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, likeCount === 1 ? \"1 like\" : likeCount + \" likes\")), React.createElement(Caption, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, React.createElement(Bold, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, user.username), \" \", caption), React.createElement(Touchable, {\n    onPress: function onPress() {\n      return navigation.navigate(\"CommentDetail\", {\n        id: id\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, comments.length > 0 ? React.createElement(CommentCount, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 32\n    }\n  }, \"\\uB313\\uAE00 \", comments.length, \"\\uAC1C \\uB354\\uBCF4\\uAE30\") : null)));\n};\n\nPost.propTypes = {\n  id: PropTypes.string.isRequired,\n  user: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    avatar: PropTypes.string,\n    username: PropTypes.string.isRequired\n  }).isRequired,\n  files: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired\n  })).isRequired,\n  likeCount: PropTypes.number.isRequired,\n  isLiked: PropTypes.bool.isRequired,\n  comments: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    text: PropTypes.string.isRequired,\n    user: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      username: PropTypes.string.isRequired\n    }).isRequired\n  })).isRequired,\n  caption: PropTypes.string.isRequired,\n  location: PropTypes.string,\n  createdAt: PropTypes.string.isRequired\n};\nexport default withNavigation(Post);","map":{"version":3,"sources":["C:/Users/GG/Documents/finalproject/semicolon-app/components/Post.js"],"names":["React","useState","PlatformMacOSStatic","styled","AntDesign","FontAwesome","PropTypes","Swiper","gql","constants","styles","useMutation","withNavigation","Tags","TOGGLE_LIKE","Container","View","Header","Touchable","TouchableOpacity","HeaderUserContainer","Bold","Text","Location","IconsContainer","IconContainer","InfoContainer","Caption","CommentCount","Tagview","Post","id","user","location","files","likeCountProp","likeCount","caption","comments","isLikedProp","isLiked","navigation","hashes","setIsLiked","setLikeCount","copyCaption","setCopyCaption","variables","postId","toggleLikeMutaton","handleLike","l","p","console","log","tag","navigate","username","height","width","borderRadius","uri","avatar","tagLabel","isSelf","map","file","url","starColor","blackColor","Platform","OS","length","propTypes","string","isRequired","shape","arrayOf","number","bool","text","createdAt"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Image, PlatformMacOSStatic } from \"react-native\";\r\nimport styled from \"styled-components/native\";\r\nimport { AntDesign, FontAwesome } from \"@expo/vector-icons\";\r\nimport PropTypes from \"prop-types\";\r\nimport Swiper from \"react-native-swiper\";\r\nimport { gql } from \"apollo-boost\";\r\nimport constants from \"../Constants\";\r\nimport styles from \"../styles\";\r\nimport { useMutation } from \"react-apollo-hooks\";\r\nimport { withNavigation } from \"react-navigation\";\r\nimport Tags from \"react-native-tags\";\r\n\r\nexport const TOGGLE_LIKE = gql`\r\n  mutation toggelLike($postId: String!) {\r\n    toggleLike(postId: $postId)\r\n  }\r\n`;\r\n\r\nconst Container = styled.View`\r\n  margin-bottom: 15px;\r\n`;\r\nconst Header = styled.View`\r\n  padding: 15px;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\nconst Touchable = styled.TouchableOpacity``;\r\nconst HeaderUserContainer = styled.View`\r\n  margin-left: 10px;\r\n`;\r\nconst Bold = styled.Text`\r\n  font-weight: 500;\r\n`;\r\nconst Location = styled.Text`\r\n  font-size: 12px;\r\n`;\r\nconst IconsContainer = styled.View`\r\n  flex-direction: row;\r\n  margin-bottom: 5px;\r\n  margin-top : -55px;\r\n`;\r\nconst IconContainer = styled.View`\r\n  margin-right: 10px;\r\n`;\r\nconst InfoContainer = styled.View`\r\n  padding: 10px;\r\n`;\r\nconst Caption = styled.Text`\r\n  margin: 5px 0px;\r\n`;\r\nconst CommentCount = styled.Text`\r\n  opacity: 0.5;\r\n  font-size: 13px;\r\n`;\r\nconst Tagview = styled.View`\r\nflex:1;\r\n    flex-direction: row;\r\n    align-items:flex-end;\r\n    justifyContent: flex-end;\r\n`\r\nconst Post = ({\r\n  id,\r\n  user,\r\n  location,\r\n  files = [],\r\n  likeCount: likeCountProp,\r\n  caption,\r\n  comments = [],\r\n  isLiked: isLikedProp,\r\n  navigation,\r\n  hashes\r\n}) => {\r\n  const [isLiked, setIsLiked] = useState(isLikedProp);\r\n  const [likeCount, setLikeCount] = useState(likeCountProp);\r\n  const [copyCaption, setCopyCaption] = useState(caption)\r\n  const [toggleLikeMutaton] = useMutation(TOGGLE_LIKE, {\r\n    variables: {\r\n      postId: id\r\n    }\r\n  });\r\n  const handleLike = async () => {\r\n    if (isLiked === true) {\r\n      setLikeCount(l => l - 1);\r\n    } else {\r\n      setLikeCount(l => l + 1);\r\n    }\r\n    setIsLiked(p => !p);\r\n    try {\r\n      await toggleLikeMutaton();\r\n    } catch (e) { }\r\n  };\r\n  console.log(hashes[0].tag);\r\n  return (<Container>\r\n    <Header>\r\n      <Touchable\r\n        onPress={() => navigation.navigate(\"UserDetail\", { username: user.username })}>\r\n        <Image\r\n          style={{ height: 40, width: 40, borderRadius: 20 }}\r\n          source={{ uri: user.avatar }}\r\n        />\r\n      </Touchable>\r\n      <Touchable onPress={() => navigation.navigate(\"UserDetail\", { username: user.username })}>\r\n        <HeaderUserContainer>\r\n          <Bold>{user.username}</Bold>\r\n          <Location>{location}</Location>\r\n        </HeaderUserContainer>\r\n      </Touchable>\r\n      <Tagview>\r\n        <Tags\r\n          initialTags={[hashes[0].tag], [hashes[1].tag], [hashes[2].tag]}\r\n          onTagPress={(tagLabel) => { console.log(tagLabel) }}\r\n          readonly\r\n        />\r\n      </Tagview>\r\n      {user.isSelf ? <Popup id={id} copyCaption={copyCaption} setCopyCaption={setCopyCaption} /> : null}\r\n    </Header >\r\n    <Swiper style={{ height: constants.width / 0.88 }}>\r\n      {files.map(file => (\r\n        <Image\r\n          style={{ width: constants.width, height: constants.width }}\r\n          key={file.id}\r\n          source={{ uri: file.url }}\r\n        />\r\n      ))}\r\n    </Swiper>\r\n    <InfoContainer>\r\n      <IconsContainer>\r\n        <Touchable onPress={handleLike}>\r\n          <IconContainer>\r\n            <AntDesign\r\n              size={24}\r\n              color={isLiked ? styles.starColor : styles.blackColor}\r\n              name={\r\n                Platform.OS === \"ios\"\r\n                  ? isLiked\r\n                    ? \"star\"\r\n                    : \"staro\"\r\n                  : isLiked\r\n                    ? \"star\"\r\n                    : \"staro\"\r\n              }\r\n            />\r\n          </IconContainer>\r\n        </Touchable>\r\n        <Touchable>\r\n          <IconContainer>\r\n            <FontAwesome\r\n              color={styles.blackColor}\r\n              size={24}\r\n              name={Platform.OS === \"ios\" ? \"comment-o\" : \"comment-o\"}\r\n            />\r\n          </IconContainer>\r\n        </Touchable>\r\n      </IconsContainer>\r\n      <Touchable>\r\n        <Bold>{likeCount === 1 ? \"1 like\" : `${likeCount} likes`}</Bold>\r\n      </Touchable>\r\n      <Caption>\r\n        <Bold>{user.username}</Bold> {caption}\r\n      </Caption>\r\n      <Touchable onPress={() => navigation.navigate(\"CommentDetail\", { id })}>\r\n        {/* <Touchable> */}\r\n        {comments.length > 0 ? <CommentCount>댓글 {comments.length}개 더보기</CommentCount> : null}\r\n\r\n      </Touchable>\r\n    </InfoContainer>\r\n  </Container >\r\n  )\r\n};\r\n\r\nPost.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  user: PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    avatar: PropTypes.string,\r\n    username: PropTypes.string.isRequired\r\n  }).isRequired,\r\n  files: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      url: PropTypes.string.isRequired\r\n    })\r\n  ).isRequired,\r\n  likeCount: PropTypes.number.isRequired,\r\n  isLiked: PropTypes.bool.isRequired,\r\n  comments: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      text: PropTypes.string.isRequired,\r\n      user: PropTypes.shape({\r\n        id: PropTypes.string.isRequired,\r\n        username: PropTypes.string.isRequired\r\n      }).isRequired\r\n    })\r\n  ).isRequired,\r\n  caption: PropTypes.string.isRequired,\r\n  location: PropTypes.string,\r\n  createdAt: PropTypes.string.isRequired\r\n};\r\n\r\nexport default withNavigation(Post);"]},"metadata":{},"sourceType":"module"}