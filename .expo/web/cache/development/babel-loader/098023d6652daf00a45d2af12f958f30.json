{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\GG\\\\Documents\\\\finalproject\\\\semicolon-app\\\\screens\\\\photo\\\\TakePhoto.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  width: 80;\\n  height: 80;\\n  border-radius: 40px;\\n  border: 10px solid \", \";\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n  justify-content: center;\\n  align-items: center;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { Camera } from \"expo-camera\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Permissions from \"expo-permissions\";\nimport constants from \"../../Constants\";\nimport Loader from \"../../components/Loader\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport styles from \"../../styles\";\nvar View = styled.View(_templateObject());\nvar Icon = styled.View(_templateObject2());\nvar Button = styled.View(_templateObject3(), styles.lightGreyColor);\nexport default (function (_ref) {\n  var navigation = _ref.navigation;\n  var cameraRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      canTakePhoto = _useState2[0],\n      setCanTakePhoto = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasPermission = _useState6[0],\n      setHasPermission = _useState6[1];\n\n  var _useState7 = useState(Camera.Constants.Type.back),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cameraType = _useState8[0],\n      setCameraType = _useState8[1];\n\n  var takePhoto = function takePhoto() {\n    var _await$cameraRef$curr, uri, asset;\n\n    return _regeneratorRuntime.async(function takePhoto$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (canTakePhoto) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            _context.prev = 2;\n            setCanTakePhoto(false);\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync({\n              quality: 1\n            }));\n\n          case 6:\n            _await$cameraRef$curr = _context.sent;\n            uri = _await$cameraRef$curr.uri;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(MediaLibrary.createAssetAsync(uri));\n\n          case 10:\n            asset = _context.sent;\n            setCanTakePhoto(true);\n            navigation.navigate(\"Upload\", {\n              photo: asset\n            });\n            _context.next = 19;\n            break;\n\n          case 15:\n            _context.prev = 15;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n            setCanTakePhoto(true);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 15]], Promise);\n  };\n\n  var askPermission = function askPermission() {\n    var _await$Permissions$as, status;\n\n    return _regeneratorRuntime.async(function askPermission$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n          case 3:\n            _await$Permissions$as = _context2.sent;\n            status = _await$Permissions$as.status;\n\n            if (status === \"granted\") {\n              setHasPermission(true);\n            }\n\n            _context2.next = 12;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n            setHasPermission(false);\n\n          case 12:\n            _context2.prev = 12;\n            setLoading(false);\n            return _context2.finish(12);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8, 12, 15]], Promise);\n  };\n\n  var toggleType = function toggleType() {\n    if (cameraType === Camera.Constants.Type.front) {\n      setCameraType(Camera.Constants.Type.back);\n    } else {\n      setCameraType(Camera.Constants.Type.front);\n    }\n  };\n\n  useEffect(function () {\n    askPermission();\n  }, []);\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, loading ? React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }) : hasPermission ? React.createElement(React.Fragment, null, React.createElement(Camera, {\n    ref: cameraRef,\n    type: cameraType,\n    style: {\n      justifyContent: \"flex-end\",\n      padding: 15,\n      width: constants.width,\n      height: constants.width\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: toggleType,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, React.createElement(Icon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, React.createElement(Ionicons, {\n    name: \"camera-reverse-outline\",\n    size: 32,\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  })))), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: takePhoto,\n    disabled: !canTakePhoto,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, React.createElement(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  })))) : null);\n});","map":{"version":3,"sources":["C:/Users/GG/Documents/finalproject/semicolon-app/screens/photo/TakePhoto.js"],"names":["React","useState","useEffect","useRef","styled","Camera","MediaLibrary","Ionicons","Permissions","constants","Loader","styles","View","Icon","Button","lightGreyColor","navigation","cameraRef","canTakePhoto","setCanTakePhoto","loading","setLoading","hasPermission","setHasPermission","Constants","Type","back","cameraType","setCameraType","takePhoto","current","takePictureAsync","quality","uri","createAssetAsync","asset","navigate","photo","console","log","askPermission","askAsync","CAMERA","status","toggleType","front","justifyContent","padding","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Camera } from \"expo-camera\";\r\nimport * as MediaLibrary from \"expo-media-library\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport constants from \"../../Constants\";\r\nimport Loader from \"../../components/Loader\";\r\nimport { TouchableOpacity, Platform } from \"react-native\";\r\nimport styles from \"../../styles\";\r\n\r\nconst View = styled.View`\r\n  flex: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.View``;\r\n\r\nconst Button = styled.View`\r\n  width: 80;\r\n  height: 80;\r\n  border-radius: 40px;\r\n  border: 10px solid ${styles.lightGreyColor};\r\n`;\r\n\r\nexport default ({ navigation }) => {\r\n  const cameraRef = useRef();\r\n  const [canTakePhoto, setCanTakePhoto] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [hasPermission, setHasPermission] = useState(false);\r\n  const [cameraType, setCameraType] = useState(Camera.Constants.Type.back);\r\n  const takePhoto = async () => {\r\n    if (!canTakePhoto) {\r\n      return;\r\n    }\r\n    try {\r\n      setCanTakePhoto(false);\r\n      const { uri } = await cameraRef.current.takePictureAsync({\r\n        quality: 1\r\n      });\r\n      const asset = await MediaLibrary.createAssetAsync(uri);\r\n      setCanTakePhoto(true);\r\n      navigation.navigate(\"Upload\", { photo: asset });\r\n    } catch (e) {\r\n      console.log(e);\r\n      setCanTakePhoto(true);\r\n    }\r\n  };\r\n  const askPermission = async () => {\r\n    try {\r\n      const { status } = await Permissions.askAsync(Permissions.CAMERA);\r\n\r\n      if (status === \"granted\") {\r\n        setHasPermission(true);\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n      setHasPermission(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const toggleType = () => {\r\n    if (cameraType === Camera.Constants.Type.front) {\r\n      setCameraType(Camera.Constants.Type.back);\r\n    } else {\r\n      setCameraType(Camera.Constants.Type.front);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    askPermission();\r\n  }, []);\r\n  return (\r\n    <View>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : hasPermission ? (\r\n        <>\r\n          <Camera\r\n            ref={cameraRef}\r\n            type={cameraType}\r\n            style={{\r\n              justifyContent: \"flex-end\",\r\n              padding: 15,\r\n              width: constants.width,\r\n              height: constants.width\r\n            }}\r\n          >\r\n            <TouchableOpacity onPress={toggleType}>\r\n              <Icon>\r\n                <Ionicons name=\"camera-reverse-outline\" size={32} color=\"white\" />\r\n              </Icon>\r\n            </TouchableOpacity>\r\n          </Camera>\r\n          <View>\r\n            <TouchableOpacity onPress={takePhoto} disabled={!canTakePhoto}>\r\n              <Button />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </>\r\n      ) : null}\r\n    </View>\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}